{"version":3,"file":"js/329.da4968d2.js","mappings":"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","sources":["webpack://mrt_pass/./node_modules/.pnpm/naive-ui@2.34.3_vue@3.3.2/node_modules/naive-ui/es/message/src/use-message.js","webpack://mrt_pass/./src/assets/icon/iSignin.vue","webpack://mrt_pass/./src/assets/icon/iSignin.vue?ddb6","webpack://mrt_pass/./src/assets/icon/iUserAdd.vue","webpack://mrt_pass/./src/assets/icon/iUserAdd.vue?696f","webpack://mrt_pass/./src/views/account/MyAccount.vue?678b","webpack://mrt_pass/./src/views/account/MyAccount.vue"],"sourcesContent":["import { inject } from 'vue';\nimport { throwError } from '../../_utils';\nimport { messageApiInjectionKey } from './context';\nexport function useMessage() {\n    const api = inject(messageApiInjectionKey, null);\n    if (api === null) {\n        throwError('use-message', 'No outer <n-message-provider /> founded. See prerequisite in https://www.naiveui.com/en-US/os-theme/components/message for more details. If you want to use `useMessage` outside setup, please check https://www.naiveui.com/zh-CN/os-theme/components/message#Q-&-A.');\n    }\n    return api;\n}\n","<template>\n  <svg\n    width=\"512\"\n    height=\"512\"\n    viewBox=\"0 0 512 512\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      fill-rule=\"evenodd\"\n      clip-rule=\"evenodd\"\n      d=\"M218.543 67.6892C255.787 60.2809 294.392 64.0831 329.475 78.6152C364.559 93.1472 394.545 117.756 415.642 149.331C436.739 180.905 448 218.026 448 256C448 293.974 436.739 331.095 415.642 362.669C394.545 394.244 364.559 418.853 329.475 433.385C294.392 447.917 255.787 451.719 218.543 444.311C181.298 436.902 147.087 418.616 120.235 391.765C111.904 383.433 98.3968 383.433 90.0655 391.765C81.7344 400.096 81.7344 413.603 90.0655 421.934C122.884 454.753 164.698 477.103 210.219 486.158C255.74 495.212 302.923 490.565 345.803 472.804C388.683 455.042 425.333 424.965 451.118 386.374C476.904 347.783 490.667 302.413 490.667 256C490.667 209.587 476.904 164.217 451.118 125.626C425.333 87.0355 388.683 56.9577 345.803 39.1963C302.923 21.4349 255.74 16.7877 210.219 25.8424C164.698 34.8971 122.884 57.2469 90.0656 90.0656C81.7344 98.3968 81.7344 111.904 90.0656 120.235C98.3968 128.567 111.904 128.567 120.235 120.235C147.087 93.3838 181.298 75.0976 218.543 67.6892Z\"\n    />\n    <path\n      fill-rule=\"evenodd\"\n      clip-rule=\"evenodd\"\n      d=\"M221.34 132.675C212.14 140.035 210.648 153.46 218.008 162.66L275.613 234.667H64.0001C52.218 234.667 42.6667 244.218 42.6667 256C42.6667 267.782 52.218 277.333 64.0001 277.333H275.613L218.008 349.34C210.648 358.54 212.14 371.965 221.34 379.325C230.54 386.685 243.965 385.194 251.325 375.993L336.659 269.327C342.892 261.535 342.892 250.464 336.659 242.673L251.325 136.006C243.965 126.806 230.54 125.315 221.34 132.675Z\"\n    />\n  </svg>\n</template>\n","import { render } from \"./iSignin.vue?vue&type=template&id=29405ff0\"\nconst script = {}\n\nimport exportComponent from \"/Users/flydoco/Documents/111學習檔案/3_資料庫/MRTPass/frontend/node_modules/.pnpm/vue-loader@17.1.1_vue@3.3.2_webpack@5.82.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <svg\n    width=\"512\"\n    height=\"512\"\n    viewBox=\"0 0 512 512\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      fill-rule=\"evenodd\"\n      clip-rule=\"evenodd\"\n      d=\"M256 106.667C220.654 106.667 192 135.32 192 170.667C192 206.013 220.654 234.667 256 234.667C291.346 234.667 320 206.013 320 170.667C320 135.32 291.346 106.667 256 106.667ZM149.333 170.667C149.333 111.756 197.09 64 256 64C314.91 64 362.667 111.756 362.667 170.667C362.667 229.577 314.91 277.333 256 277.333C197.09 277.333 149.333 229.577 149.333 170.667Z\"\n    />\n    <path\n      d=\"M284.302 321.618C274.957 320.544 265.497 320 256 320C215.051 320 174.801 330.108 141.464 349.294C108.139 368.473 82.7994 396.165 71.0589 429.027C67.095 440.122 72.876 452.33 83.9713 456.294C95.0665 460.258 107.274 454.477 111.238 443.382C118.945 421.81 136.459 401.402 162.746 386.274C184.378 373.825 210.426 365.873 238.037 363.451C245.096 342.617 262.593 326.597 284.302 321.618Z\"\n    />\n    <path\n      fill-rule=\"evenodd\"\n      clip-rule=\"evenodd\"\n      d=\"M410.667 298.667C410.667 283.939 398.728 272 384 272C369.272 272 357.333 283.939 357.333 298.667V357.333H298.667C283.939 357.333 272 369.272 272 384C272 398.728 283.939 410.667 298.667 410.667H357.333V469.333C357.333 484.061 369.272 496 384 496C398.728 496 410.667 484.061 410.667 469.333V410.667H469.333C484.061 410.667 496 398.728 496 384C496 369.272 484.061 357.333 469.333 357.333H410.667V298.667Z\"\n    />\n  </svg>\n</template>\n","import { render } from \"./iUserAdd.vue?vue&type=template&id=c8be72e6\"\nconst script = {}\n\nimport exportComponent from \"/Users/flydoco/Documents/111學習檔案/3_資料庫/MRTPass/frontend/node_modules/.pnpm/vue-loader@17.1.1_vue@3.3.2_webpack@5.82.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createVNode as _createVNode, unref as _unref, withCtx as _withCtx, createElementVNode as _createElementVNode, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = {\n  bg: \"white\",\n  border: \"gray-200 1\"\n}\nconst _hoisted_2 = {\n  flex: \"~ gap-6\",\n  justify: \"items-center\",\n  p: \"x-6 y-4\"\n}\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"div\", { flex: \"~ col gap-2\" }, [\n  /*#__PURE__*/_createElementVNode(\"div\", { text: \"base title\" }, \"尚未登入\"),\n  /*#__PURE__*/_createElementVNode(\"div\", { text: \"xs secondary\" }, \"訪客使用者\")\n], -1)\nconst _hoisted_4 = {\n  flex: \"~ col gap-4\",\n  p: \"x-6 y-4\",\n  bg: \"white\"\n}\nconst _hoisted_5 = {\n  flex: \"~ gap-8\",\n  justify: \"center\",\n  p: \"x-12 y-4\",\n  bg: \"white\"\n}\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"div\", null, \"登入帳號\", -1)\nconst _hoisted_7 = /*#__PURE__*/_createElementVNode(\"div\", null, \"註冊帳號\", -1)\nconst _hoisted_8 = /*#__PURE__*/_createElementVNode(\"div\", {\n  flex: \"~\",\n  text: \"xs secondary\",\n  justify: \"center\"\n}, [\n  /*#__PURE__*/_createElementVNode(\"div\", null, \"登入、註冊之後，便可以張貼景點資訊與在景點留下評論喔！\")\n], -1)\n\nimport router from \"@/router\";\nimport axios from \"axios\";\nimport {\n  NForm,\n  NIcon,\n  NInput,\n  NFormItem,\n  FormRules,\n  useMessage,\n  NButton,\n  FormItemRule,\n} from \"naive-ui\";\nimport signin from \"../../assets/icon/iSignin.vue\";\nimport userIcon from \"../../assets/icon/iUser.vue\";\nimport userAdd from \"../../assets/icon/iUserAdd.vue\";\nimport { ref, reactive, computed, onMounted, watch } from \"vue\";\nimport { watchOnce } from \"@vueuse/core\";\nimport store from \"/src/scripts/vuex.ts\";\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'MyAccount',\n  setup(__props) {\n\nconst isLogin = computed(() => (store?.state?.userinfo ? true : false));\nconst message = useMessage();\n\nonMounted(() => {\n  if (!isLogin.value) {\n    fetchsession();\n    watchOnce(isLogin, () => {\n      router.push(\"/profile\");\n    });\n  }\n  //console.log(store.state.userinfo);\n  else {\n    router.push(\"/profile\");\n  }\n});\nconst model = reactive({\n  email: \"\",\n  password: \"\",\n});\n\nconst rules: FormRules = {\n  email: [\n    {\n      required: true,\n      validator(rule: FormItemRule, value: string) {\n        if (!value) {\n          return new Error(\"需要輸入帳號\");\n        }\n        return true;\n      },\n      trigger: [\"input\", \"blur\"],\n    },\n  ],\n  password: [\n    {\n      required: true,\n      validator(rule: FormItemRule, value: string) {\n        if (!value) {\n          return new Error(\"需要輸入密碼\");\n        }\n        return true;\n      },\n      trigger: [\"input\", \"blur\"],\n    },\n  ],\n};\nfunction fetchsession() {\n  //axios get\n  axios\n    .get(\"http://localhost:3000/session\")\n    .then(function (response) {\n      //console.log(response.data.data);\n      if (response.data.data.isLogin) {\n        //console.log(response.data.data.member);\n        store.dispatch(\"userinfo\", response.data.data.member);\n        //console.log(store.state.userinfo);\n      }\n    })\n    .catch(function (error) {\n      console.log(error);\n    });\n  //axios\n}\nfunction login() {\n  //axios post\n  axios\n    .post(\"http://localhost:3000/sign_in\", {\n      account: model.email,\n      password: model.password,\n    })\n    .then(function (response) {\n      message.success(\"登入成功\");\n      store.dispatch(\"userinfo\", response.data.data);\n    })\n    .catch(function (error) {\n      message.error(\"登入失敗，請確認帳號密碼是否正確\");\n    });\n  //axios\n  watchOnce(isLogin, () => {\n    router.push(\"/profile\");\n  });\n}\n\nfunction regist() {\n  //axios post\n  axios\n    .post(\"http://localhost:3000/sign_up\", {\n      account: model.email,\n      password: model.password,\n    })\n    .then(function (response) {\n      message.success(\"註冊成功\");\n    })\n    .catch(function (error) {\n      message.error(\"註冊失敗，請確認帳號是否已被註冊或是否設定密碼\");\n    });\n  //axios\n}\n/*\nfunction logoutbutton() {\n  //axios post\n  axios\n    .post(\"http://localhost:3000/sign_out\")\n    .then(function (response) {\n      //console.log(response);\n      store.dispatch(\"userinfo\", undefined);\n      router.push(\"/account\");\n    })\n    .catch(function (error) {\n      store.dispatch(\"userinfo\", undefined);\n      console.log(error);\n      router.push(\"/account\");\n    });\n  //axios\n}*/\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createVNode(_unref(NForm), {\n      ref: \"formRef\",\n      model: model,\n      rules: rules,\n      \"label-width\": \"auto\",\n      \"require-mark-placement\": \"right-hanging\",\n      size: \"medium\",\n      style: { maxwidth: '800px', align: ' center ' },\n      class: \"flex flex-col my-3 gap-3\"\n    }, {\n      default: _withCtx(() => [\n        _createElementVNode(\"div\", _hoisted_1, [\n          _createElementVNode(\"div\", _hoisted_2, [\n            _createVNode(_unref(NIcon), { size: \"48\" }, {\n              default: _withCtx(() => [\n                _createVNode(userIcon)\n              ]),\n              _: 1\n            }),\n            _hoisted_3\n          ])\n        ]),\n        _createElementVNode(\"div\", _hoisted_4, [\n          _createVNode(_unref(NFormItem), {\n            label: \"帳號\",\n            path: \"email\"\n          }, {\n            default: _withCtx(() => [\n              _createVNode(_unref(NInput), {\n                value: model.email,\n                \"onUpdate:value\": _cache[0] || (_cache[0] = ($event: any) => ((model.email) = $event)),\n                placeholder: \"請輸入帳號\"\n              }, null, 8, [\"value\"])\n            ]),\n            _: 1\n          }),\n          _createVNode(_unref(NFormItem), {\n            label: \"密碼\",\n            path: \"password\"\n          }, {\n            default: _withCtx(() => [\n              _createVNode(_unref(NInput), {\n                value: model.password,\n                \"onUpdate:value\": _cache[1] || (_cache[1] = ($event: any) => ((model.password) = $event)),\n                type: \"password\",\n                \"show-password-on\": \"click\",\n                placeholder: \"請輸入密碼\"\n              }, null, 8, [\"value\"])\n            ]),\n            _: 1\n          })\n        ]),\n        _createElementVNode(\"div\", _hoisted_5, [\n          _createVNode(_unref(NButton), {\n            onClick: login,\n            type: \"primary\",\n            flex: \"grow\",\n            ghost: \"\"\n          }, {\n            icon: _withCtx(() => [\n              _createVNode(_unref(NIcon), { size: 18 }, {\n                default: _withCtx(() => [\n                  _createVNode(signin)\n                ]),\n                _: 1\n              })\n            ]),\n            default: _withCtx(() => [\n              _hoisted_6\n            ]),\n            _: 1\n          }),\n          _createVNode(_unref(NButton), {\n            onClick: regist,\n            type: \"default\",\n            flex: \"grow\",\n            ghost: \"\"\n          }, {\n            icon: _withCtx(() => [\n              _createVNode(_unref(NIcon), { size: 18 }, {\n                default: _withCtx(() => [\n                  _createVNode(userAdd)\n                ]),\n                _: 1\n              })\n            ]),\n            default: _withCtx(() => [\n              _hoisted_7\n            ]),\n            _: 1\n          })\n        ])\n      ]),\n      _: 1\n    }, 8, [\"model\"]),\n    _hoisted_8\n  ], 64))\n}\n}\n\n})","import script from \"./MyAccount.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./MyAccount.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["useMessage","api","width","height","viewBox","xmlns","d","script","__exports__","render","bg","border","flex","justify","p","_","text","_hoisted_6","_hoisted_7","_hoisted_8","__name","setup","__props","isLogin","userinfo","message","value","router","fetchsession","model","email","password","rules","required","validator","rule","Error","trigger","axios","then","response","data","member","catch","error","console","log","login","account","success","regist","_ctx","_cache","ref","size","style","maxwidth","align","class","default","label","path","$event","placeholder","type","onClick","ghost","icon"],"sourceRoot":""}